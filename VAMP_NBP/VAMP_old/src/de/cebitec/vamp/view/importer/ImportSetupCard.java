package de.cebitec.vamp.view.importer;

import de.cebitec.vamp.parser.ReferenceJob;
import de.cebitec.vamp.parser.TrackJobs;
import java.awt.Component;

/**
 *
 * @author ddoppmeier
 */
public class ImportSetupCard extends javax.swing.JPanel {

    private static final long serialVersionUID = 127732323;
    private ImporterViewFrame view;

    /** Creates new form SetupImportCard */
    public ImportSetupCard() {
        initComponents();
    }

    public ImportSetupCard(ImporterViewFrame view){
        initComponents();
        this.view = view;
    }

    void refGenJobAdded(ReferenceJob refGenJob) {
        refGenJobView1.add(refGenJob);
    }

    void refGenJobRemoved(ReferenceJob refGenJob) {
        refGenJobView1.remove(refGenJob);
    }

    void setRemoveButtonEnabled(boolean b) {
        removeJob.setEnabled(b);
    }

    void trackJobAdded(TrackJobs trackJob) {
        trackJobView1.add(trackJob);
    }

    void trackJobRemoved(TrackJobs trackJob) {
        trackJobView1.remove(trackJob);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        refGenJobView1 = new de.cebitec.vamp.view.importer.RefJobView(this);
        trackJobView1 = new de.cebitec.vamp.view.importer.TrackJobView(this);
        newJob = new javax.swing.JButton();
        removeJob = new javax.swing.JButton();

        jTabbedPane1.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jTabbedPane1StateChanged(evt);
            }
        });
        jTabbedPane1.addTab("References", refGenJobView1);
        jTabbedPane1.addTab("Tracks", trackJobView1);

        newJob.setText("Add");
        newJob.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                newJobActionPerformed(evt);
            }
        });

        removeJob.setText("remove");
        removeJob.setEnabled(false);
        removeJob.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                removeJobActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jTabbedPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 435, Short.MAX_VALUE)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(283, Short.MAX_VALUE)
                .addComponent(removeJob)
                .addGap(7, 7, 7)
                .addComponent(newJob)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jTabbedPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 257, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(newJob, javax.swing.GroupLayout.PREFERRED_SIZE, 33, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(removeJob, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(17, 17, 17))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void newJobActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_newJobActionPerformed
        Component c = jTabbedPane1.getSelectedComponent();
        if(c == null){
        } else if(c instanceof RefJobView) {
            view.showNewRefGenDialog();
        } else if(c instanceof TrackJobView){
            view.showNewTrackDialog();
        }
}//GEN-LAST:event_newJobActionPerformed

    private void removeJobActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_removeJobActionPerformed
        Component c = jTabbedPane1.getSelectedComponent();
        if(c == null){
        } else if(c instanceof RefJobView) {
            view.removeRefGenJob(refGenJobView1.getSelectedItem());
      
        } else if(c instanceof TrackJobView){
            view.removeTrackJob(trackJobView1.getSelectedItem());
        }
    }//GEN-LAST:event_removeJobActionPerformed

    private void jTabbedPane1StateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jTabbedPane1StateChanged
        Component c = jTabbedPane1.getSelectedComponent();
        boolean isSelected = false;
        if(c instanceof RefJobView){
            if(refGenJobView1.IsRowSelected()){
                isSelected = true;
            }
        }

        if(isSelected){
            setRemoveButtonEnabled(true);
        } else{
            setRemoveButtonEnabled(false);
        }
    }//GEN-LAST:event_jTabbedPane1StateChanged


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JButton newJob;
    private de.cebitec.vamp.view.importer.RefJobView refGenJobView1;
    private javax.swing.JButton removeJob;
    private de.cebitec.vamp.view.importer.TrackJobView trackJobView1;
    // End of variables declaration//GEN-END:variables

}
